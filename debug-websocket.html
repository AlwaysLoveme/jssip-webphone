<!DOCTYPE html>
<html>
<head>
    <title>WebSocketè¿žæŽ¥æµ‹è¯•</title>
</head>
<body>
    <h1>WebSocketè¿žæŽ¥æµ‹è¯•</h1>
    <div id="status">å‡†å¤‡è¿žæŽ¥...</div>
    <div id="logs"></div>
    
    <script>
        // cursor-start
        function log(message) {
            const logs = document.getElementById('logs');
            const p = document.createElement('p');
            p.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            logs.appendChild(p);
            console.log(message);
        }
        
        function testWebSocket(url, description) {
            log(`å°è¯•è¿žæŽ¥: ${description} - ${url}`);
            
            const ws = new WebSocket(url);
            
            ws.onopen = function() {
                log(`âœ… ${description} è¿žæŽ¥æˆåŠŸ!`);
                document.getElementById('status').textContent = `${description} è¿žæŽ¥æˆåŠŸ`;
                ws.close();
            };
            
            ws.onerror = function(error) {
                log(`âŒ ${description} è¿žæŽ¥é”™è¯¯: ${error}`);
                document.getElementById('status').textContent = `${description} è¿žæŽ¥å¤±è´¥`;
            };
            
            ws.onclose = function(event) {
                log(`ðŸ”Œ ${description} è¿žæŽ¥å…³é—­: code=${event.code}, reason=${event.reason}`);
            };
        }
        
        // æµ‹è¯•ä¸åŒçš„è¿žæŽ¥æ–¹å¼
        setTimeout(() => {
            // 1. æµ‹è¯•ä»£ç†è¿žæŽ¥
            testWebSocket('ws://localhost:3000/socket', 'ä»£ç†è¿žæŽ¥');
        }, 1000);
        
        setTimeout(() => {
            // 2. æµ‹è¯•ç›´æŽ¥è¿žæŽ¥
            testWebSocket('wss://phone.codingman.icu', 'ç›´æŽ¥è¿žæŽ¥');
        }, 3000);
        // cursor-end
    </script>
</body>
</html> 